{
    "provider":{
        "project":"operating-rush-280308",
        "region":"us-west1"
    },
    "resources":[
        {
            "type":"resource",
            "resource":"google_compute_instance",
            "config":{
                "name":"test-name",
                "machine_type":"f1-micro",
                "zone":"us-west1-a",
                "image":"debian-cloud/debian-9",
                "metadata":{
                    "key":"mingphuong:${file(\"./gpc.pub\")}"
                },
                "metadata_startup_script":"sudo apt-get update; sudo apt-get install -yq build-essential python-pip rsync; pip install flask",
                "google_compute_network":"vpc",
                "google_compute_subnetwork":"public-subnet-1"
            }
        },
        {
            "type":"resource",
            "resource":"google_compute_firewall",
            "config":{
                "name":"allow-ssh",
                "google_compute_network":"vpc",
                "allows":[
                    {
                        "ports":[22,44],
                        "protocol":"tcp"
                    }
                ],
                "denies":[
                    {
                        "protocol":"https",
                        "ports":[8181,2]
                    }
                ]     
            }
        },
        {
            "type":"resource",
            "resource":"google_compute_subnetwork",
            "config":{
                "name":"public-subnet-1",
                "ip_cidr_range":"10.10.1.0/24",
                "google_compute_network":"vpc",
                "region":"us-west1"
            }
        },
        {
            "type":"resource",
            "resource":"google_compute_network",
            "config":{
                "name":"vpc",
                "auto_create_subnetworks":"false",
                "routing_mode":"GLOBAL"
            }
        }
    ]
}